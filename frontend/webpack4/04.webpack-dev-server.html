<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4. webpack-dev-server | 砥砺前行</title>
    <meta name="description" content="Stay hungry，Stay foolish">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.718111f3.css" as="style"><link rel="preload" href="/assets/js/app.c2739f0d.js" as="script"><link rel="preload" href="/assets/js/2.fd8d7b4d.js" as="script"><link rel="preload" href="/assets/js/214.b8d20041.js" as="script"><link rel="preload" href="/assets/js/29.03c53af3.js" as="script"><link rel="prefetch" href="/assets/js/10.da3108ea.js"><link rel="prefetch" href="/assets/js/100.67a883ce.js"><link rel="prefetch" href="/assets/js/101.3bacadc1.js"><link rel="prefetch" href="/assets/js/102.39233cbd.js"><link rel="prefetch" href="/assets/js/103.7443483a.js"><link rel="prefetch" href="/assets/js/104.67980602.js"><link rel="prefetch" href="/assets/js/105.74a6cc40.js"><link rel="prefetch" href="/assets/js/106.5f5c004f.js"><link rel="prefetch" href="/assets/js/107.ee0c71a5.js"><link rel="prefetch" href="/assets/js/108.d9584ccd.js"><link rel="prefetch" href="/assets/js/109.c3cafe46.js"><link rel="prefetch" href="/assets/js/11.b84d7d32.js"><link rel="prefetch" href="/assets/js/110.8450e818.js"><link rel="prefetch" href="/assets/js/111.5b7e7ede.js"><link rel="prefetch" href="/assets/js/112.c9d6d4ca.js"><link rel="prefetch" href="/assets/js/113.7ad6cc7d.js"><link rel="prefetch" href="/assets/js/114.a7526e87.js"><link rel="prefetch" href="/assets/js/115.befcefa7.js"><link rel="prefetch" href="/assets/js/116.a505bc90.js"><link rel="prefetch" href="/assets/js/117.17001fe4.js"><link rel="prefetch" href="/assets/js/118.b0389afa.js"><link rel="prefetch" href="/assets/js/119.c2ed753a.js"><link rel="prefetch" href="/assets/js/12.3c941db7.js"><link rel="prefetch" href="/assets/js/120.91c7ec2a.js"><link rel="prefetch" href="/assets/js/121.441a3952.js"><link rel="prefetch" href="/assets/js/122.1467c2d8.js"><link rel="prefetch" href="/assets/js/123.52f7b868.js"><link rel="prefetch" href="/assets/js/124.4dc070e2.js"><link rel="prefetch" href="/assets/js/125.c88f9a64.js"><link rel="prefetch" href="/assets/js/126.8ed7a3b3.js"><link rel="prefetch" href="/assets/js/127.cc3d0412.js"><link rel="prefetch" href="/assets/js/128.f124681d.js"><link rel="prefetch" href="/assets/js/129.a906eb9a.js"><link rel="prefetch" href="/assets/js/13.526e0105.js"><link rel="prefetch" href="/assets/js/130.4c234e18.js"><link rel="prefetch" href="/assets/js/131.db0f782e.js"><link rel="prefetch" href="/assets/js/132.f43fc74d.js"><link rel="prefetch" href="/assets/js/133.c84d2c2d.js"><link rel="prefetch" href="/assets/js/134.7d555c41.js"><link rel="prefetch" href="/assets/js/135.13836bf9.js"><link rel="prefetch" href="/assets/js/136.7a354be1.js"><link rel="prefetch" href="/assets/js/137.2c51e755.js"><link rel="prefetch" href="/assets/js/138.f249c06b.js"><link rel="prefetch" href="/assets/js/139.968b10de.js"><link rel="prefetch" href="/assets/js/14.febc7306.js"><link rel="prefetch" href="/assets/js/140.41dbeb42.js"><link rel="prefetch" href="/assets/js/141.9c495b21.js"><link rel="prefetch" href="/assets/js/142.ff512f1d.js"><link rel="prefetch" href="/assets/js/143.03c629eb.js"><link rel="prefetch" href="/assets/js/144.6a6e7823.js"><link rel="prefetch" href="/assets/js/145.23393fef.js"><link rel="prefetch" href="/assets/js/146.26221a77.js"><link rel="prefetch" href="/assets/js/147.87c76c63.js"><link rel="prefetch" href="/assets/js/148.3eefdf63.js"><link rel="prefetch" href="/assets/js/149.9f0152ae.js"><link rel="prefetch" href="/assets/js/15.053966fe.js"><link rel="prefetch" href="/assets/js/150.1d1bcf63.js"><link rel="prefetch" href="/assets/js/151.c48d6620.js"><link rel="prefetch" href="/assets/js/152.13fa8ce6.js"><link rel="prefetch" href="/assets/js/153.c20f5a74.js"><link rel="prefetch" href="/assets/js/154.d13e9b75.js"><link rel="prefetch" href="/assets/js/155.ec85dcda.js"><link rel="prefetch" href="/assets/js/156.b6ca8381.js"><link rel="prefetch" href="/assets/js/157.d788f2b8.js"><link rel="prefetch" href="/assets/js/158.139f4a19.js"><link rel="prefetch" href="/assets/js/159.b74e2655.js"><link rel="prefetch" href="/assets/js/16.11c5c1b1.js"><link rel="prefetch" href="/assets/js/160.9a6d3f50.js"><link rel="prefetch" href="/assets/js/161.92650050.js"><link rel="prefetch" href="/assets/js/162.a72dff28.js"><link rel="prefetch" href="/assets/js/163.fa57e123.js"><link rel="prefetch" href="/assets/js/164.78e761f7.js"><link rel="prefetch" href="/assets/js/165.20f19016.js"><link rel="prefetch" href="/assets/js/166.a4fd5c3e.js"><link rel="prefetch" href="/assets/js/167.75575276.js"><link rel="prefetch" href="/assets/js/168.e145208a.js"><link rel="prefetch" href="/assets/js/169.435f50da.js"><link rel="prefetch" href="/assets/js/17.5201d689.js"><link rel="prefetch" href="/assets/js/170.244210dd.js"><link rel="prefetch" href="/assets/js/171.a78dfe3b.js"><link rel="prefetch" href="/assets/js/172.4df4d58e.js"><link rel="prefetch" href="/assets/js/173.d552ef15.js"><link rel="prefetch" href="/assets/js/174.97873065.js"><link rel="prefetch" href="/assets/js/175.ed7e4b07.js"><link rel="prefetch" href="/assets/js/176.0de278ca.js"><link rel="prefetch" href="/assets/js/177.55576f41.js"><link rel="prefetch" href="/assets/js/178.e990e347.js"><link rel="prefetch" href="/assets/js/179.e702b656.js"><link rel="prefetch" href="/assets/js/18.cc72ab49.js"><link rel="prefetch" href="/assets/js/180.f6d9473e.js"><link rel="prefetch" href="/assets/js/181.1ee11ad2.js"><link rel="prefetch" href="/assets/js/182.b0767d83.js"><link rel="prefetch" href="/assets/js/183.ec7fb558.js"><link rel="prefetch" href="/assets/js/184.d84c6f29.js"><link rel="prefetch" href="/assets/js/185.3e88a3ce.js"><link rel="prefetch" href="/assets/js/186.f3c9b254.js"><link rel="prefetch" href="/assets/js/187.6d686e40.js"><link rel="prefetch" href="/assets/js/188.6dbbee5a.js"><link rel="prefetch" href="/assets/js/189.0baaccdd.js"><link rel="prefetch" href="/assets/js/19.a4378585.js"><link rel="prefetch" href="/assets/js/190.a9603823.js"><link rel="prefetch" href="/assets/js/191.04c4f3a2.js"><link rel="prefetch" href="/assets/js/192.e05b35f8.js"><link rel="prefetch" href="/assets/js/193.38f3b579.js"><link rel="prefetch" href="/assets/js/194.da6a76c7.js"><link rel="prefetch" href="/assets/js/195.4e428a49.js"><link rel="prefetch" href="/assets/js/196.afe44b88.js"><link rel="prefetch" href="/assets/js/197.523ceb84.js"><link rel="prefetch" href="/assets/js/198.f56f4750.js"><link rel="prefetch" href="/assets/js/199.08eaf3d5.js"><link rel="prefetch" href="/assets/js/20.186842d4.js"><link rel="prefetch" href="/assets/js/200.be743fec.js"><link rel="prefetch" href="/assets/js/201.57e24f9e.js"><link rel="prefetch" href="/assets/js/202.368a2898.js"><link rel="prefetch" href="/assets/js/203.a5e566d1.js"><link rel="prefetch" href="/assets/js/204.8f87525f.js"><link rel="prefetch" href="/assets/js/205.85b66555.js"><link rel="prefetch" href="/assets/js/206.5896f019.js"><link rel="prefetch" href="/assets/js/207.741e52ca.js"><link rel="prefetch" href="/assets/js/208.53af3b6c.js"><link rel="prefetch" href="/assets/js/209.92d59fab.js"><link rel="prefetch" href="/assets/js/21.db4b44a5.js"><link rel="prefetch" href="/assets/js/210.7e69c4c4.js"><link rel="prefetch" href="/assets/js/211.1e397264.js"><link rel="prefetch" href="/assets/js/212.12376fd9.js"><link rel="prefetch" href="/assets/js/213.7fa2e3af.js"><link rel="prefetch" href="/assets/js/215.f6d2eb34.js"><link rel="prefetch" href="/assets/js/216.741a20bd.js"><link rel="prefetch" href="/assets/js/217.ecf73230.js"><link rel="prefetch" href="/assets/js/218.322edf0c.js"><link rel="prefetch" href="/assets/js/219.44146753.js"><link rel="prefetch" href="/assets/js/22.48bc71dd.js"><link rel="prefetch" href="/assets/js/220.f862f514.js"><link rel="prefetch" href="/assets/js/221.997f25f7.js"><link rel="prefetch" href="/assets/js/222.fc54bcbd.js"><link rel="prefetch" href="/assets/js/223.fd2fd4e7.js"><link rel="prefetch" href="/assets/js/224.67908e13.js"><link rel="prefetch" href="/assets/js/225.8eba032f.js"><link rel="prefetch" href="/assets/js/226.8a42d999.js"><link rel="prefetch" href="/assets/js/227.3eb98c4c.js"><link rel="prefetch" href="/assets/js/228.bcdc3b25.js"><link rel="prefetch" href="/assets/js/229.a3d52cd4.js"><link rel="prefetch" href="/assets/js/23.d6967120.js"><link rel="prefetch" href="/assets/js/230.f23cd2e4.js"><link rel="prefetch" href="/assets/js/231.9bdf0e40.js"><link rel="prefetch" href="/assets/js/232.2f12f1e7.js"><link rel="prefetch" href="/assets/js/233.f0733f2e.js"><link rel="prefetch" href="/assets/js/234.b178c9bc.js"><link rel="prefetch" href="/assets/js/235.35628e21.js"><link rel="prefetch" href="/assets/js/236.df116729.js"><link rel="prefetch" href="/assets/js/237.f1381c37.js"><link rel="prefetch" href="/assets/js/238.8313d86e.js"><link rel="prefetch" href="/assets/js/239.8a7706c8.js"><link rel="prefetch" href="/assets/js/24.7389deb5.js"><link rel="prefetch" href="/assets/js/240.10559cab.js"><link rel="prefetch" href="/assets/js/241.3496b2af.js"><link rel="prefetch" href="/assets/js/242.ce42e1c8.js"><link rel="prefetch" href="/assets/js/243.03fa6a36.js"><link rel="prefetch" href="/assets/js/244.8b5b81e5.js"><link rel="prefetch" href="/assets/js/245.af03337c.js"><link rel="prefetch" href="/assets/js/246.886ba71c.js"><link rel="prefetch" href="/assets/js/247.0322fa45.js"><link rel="prefetch" href="/assets/js/248.ca7b4c74.js"><link rel="prefetch" href="/assets/js/249.6a20a5fc.js"><link rel="prefetch" href="/assets/js/25.65e19f51.js"><link rel="prefetch" href="/assets/js/250.89bc5046.js"><link rel="prefetch" href="/assets/js/251.cdbf3ff2.js"><link rel="prefetch" href="/assets/js/252.492911cd.js"><link rel="prefetch" href="/assets/js/253.38d507a6.js"><link rel="prefetch" href="/assets/js/254.58298afa.js"><link rel="prefetch" href="/assets/js/255.7b68ffd4.js"><link rel="prefetch" href="/assets/js/256.13359a56.js"><link rel="prefetch" href="/assets/js/257.148d21ee.js"><link rel="prefetch" href="/assets/js/26.9e01c3c6.js"><link rel="prefetch" href="/assets/js/27.a8c6418a.js"><link rel="prefetch" href="/assets/js/28.7fceae21.js"><link rel="prefetch" href="/assets/js/3.b732fc70.js"><link rel="prefetch" href="/assets/js/30.0a3af1db.js"><link rel="prefetch" href="/assets/js/31.012abf40.js"><link rel="prefetch" href="/assets/js/32.b5accef7.js"><link rel="prefetch" href="/assets/js/33.331fc1ef.js"><link rel="prefetch" href="/assets/js/34.8f3b1537.js"><link rel="prefetch" href="/assets/js/35.0a02b86a.js"><link rel="prefetch" href="/assets/js/36.1813f5a1.js"><link rel="prefetch" href="/assets/js/37.5880bc8e.js"><link rel="prefetch" href="/assets/js/38.72e3bf6a.js"><link rel="prefetch" href="/assets/js/39.aba6807f.js"><link rel="prefetch" href="/assets/js/4.c269f2f9.js"><link rel="prefetch" href="/assets/js/40.58bbe976.js"><link rel="prefetch" href="/assets/js/41.437fbef8.js"><link rel="prefetch" href="/assets/js/42.9cca5be4.js"><link rel="prefetch" href="/assets/js/43.a18fe210.js"><link rel="prefetch" href="/assets/js/44.009c5209.js"><link rel="prefetch" href="/assets/js/45.bb4bc150.js"><link rel="prefetch" href="/assets/js/46.5c8c01b0.js"><link rel="prefetch" href="/assets/js/47.78acc2cb.js"><link rel="prefetch" href="/assets/js/48.3b552c56.js"><link rel="prefetch" href="/assets/js/49.a0206703.js"><link rel="prefetch" href="/assets/js/5.83bd2558.js"><link rel="prefetch" href="/assets/js/50.3c00c5f4.js"><link rel="prefetch" href="/assets/js/51.c0cabdda.js"><link rel="prefetch" href="/assets/js/52.6dfb647e.js"><link rel="prefetch" href="/assets/js/53.f5ba32bd.js"><link rel="prefetch" href="/assets/js/54.31f728cb.js"><link rel="prefetch" href="/assets/js/55.101847bb.js"><link rel="prefetch" href="/assets/js/56.ec897929.js"><link rel="prefetch" href="/assets/js/57.dccd7ae5.js"><link rel="prefetch" href="/assets/js/58.c3831a30.js"><link rel="prefetch" href="/assets/js/59.056663c0.js"><link rel="prefetch" href="/assets/js/6.89468a4d.js"><link rel="prefetch" href="/assets/js/60.7f836f89.js"><link rel="prefetch" href="/assets/js/61.2549e4ff.js"><link rel="prefetch" href="/assets/js/62.8f073b3b.js"><link rel="prefetch" href="/assets/js/63.a5c807d2.js"><link rel="prefetch" href="/assets/js/64.6aa077b2.js"><link rel="prefetch" href="/assets/js/65.4f068940.js"><link rel="prefetch" href="/assets/js/66.f66784c3.js"><link rel="prefetch" href="/assets/js/67.1a4f1a45.js"><link rel="prefetch" href="/assets/js/68.0473bb47.js"><link rel="prefetch" href="/assets/js/69.9367fa27.js"><link rel="prefetch" href="/assets/js/7.5da70ec5.js"><link rel="prefetch" href="/assets/js/70.9a44c62c.js"><link rel="prefetch" href="/assets/js/71.07364a28.js"><link rel="prefetch" href="/assets/js/72.ce0eea8f.js"><link rel="prefetch" href="/assets/js/73.e4590a8f.js"><link rel="prefetch" href="/assets/js/74.ac831ede.js"><link rel="prefetch" href="/assets/js/75.f5d88311.js"><link rel="prefetch" href="/assets/js/76.8363320f.js"><link rel="prefetch" href="/assets/js/77.36d7f80a.js"><link rel="prefetch" href="/assets/js/78.f151fe46.js"><link rel="prefetch" href="/assets/js/79.7eb5e29c.js"><link rel="prefetch" href="/assets/js/8.c5ba852e.js"><link rel="prefetch" href="/assets/js/80.43907670.js"><link rel="prefetch" href="/assets/js/81.800f11e4.js"><link rel="prefetch" href="/assets/js/82.a97ca1d7.js"><link rel="prefetch" href="/assets/js/83.1801fbf1.js"><link rel="prefetch" href="/assets/js/84.f79b7088.js"><link rel="prefetch" href="/assets/js/85.d5e69a1e.js"><link rel="prefetch" href="/assets/js/86.f5f948c9.js"><link rel="prefetch" href="/assets/js/87.377736f7.js"><link rel="prefetch" href="/assets/js/88.666132e6.js"><link rel="prefetch" href="/assets/js/89.3ffee588.js"><link rel="prefetch" href="/assets/js/9.a9be74d1.js"><link rel="prefetch" href="/assets/js/90.8870b432.js"><link rel="prefetch" href="/assets/js/91.161389bc.js"><link rel="prefetch" href="/assets/js/92.9eee2b04.js"><link rel="prefetch" href="/assets/js/93.33330e58.js"><link rel="prefetch" href="/assets/js/94.7c5f8c9f.js"><link rel="prefetch" href="/assets/js/95.dcaaa597.js"><link rel="prefetch" href="/assets/js/96.eadc40dd.js"><link rel="prefetch" href="/assets/js/97.d1c2f241.js"><link rel="prefetch" href="/assets/js/98.0b0e21b3.js"><link rel="prefetch" href="/assets/js/99.76ac6e42.js">
    <link rel="stylesheet" href="/assets/css/0.styles.718111f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">砥砺前行</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端积累</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/frontend/javascript/" class="nav-link">重学JS基础</a></li><li class="dropdown-item"><!----> <a href="/frontend/jsTopic/" class="nav-link">JS专题</a></li><li class="dropdown-item"><!----> <a href="/frontend/es6/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/frontend/react/" class="nav-link">React全家桶</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">Vue全家桶</a></li><li class="dropdown-item"><!----> <a href="/frontend/babel/" class="nav-link">Babel</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack4/" class="nav-link router-link-active">Webpack4配置实战</a></li><li class="dropdown-item"><!----> <a href="/frontend/typescript/" class="nav-link">每天学点typescript</a></li><li class="dropdown-item"><!----> <a href="/frontend/web/" class="nav-link">浏览器相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">服务端积累</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/docker/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">NodeJS</a></li><li class="dropdown-item"><!----> <a href="/backend/koa/" class="nav-link">Koa</a></li><li class="dropdown-item"><!----> <a href="/backend/mysql/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/backend/mongodb/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/backend/nginx/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/backend/http/" class="nav-link">HTTP协议</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">前端杂谈</a></div><div class="nav-item"><a href="/interview/" class="nav-link">每日一题</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/more/linux/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div> <a href="https://github.com/liujie2019/VuePress-Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端积累</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/frontend/javascript/" class="nav-link">重学JS基础</a></li><li class="dropdown-item"><!----> <a href="/frontend/jsTopic/" class="nav-link">JS专题</a></li><li class="dropdown-item"><!----> <a href="/frontend/es6/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/frontend/react/" class="nav-link">React全家桶</a></li><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">Vue全家桶</a></li><li class="dropdown-item"><!----> <a href="/frontend/babel/" class="nav-link">Babel</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack4/" class="nav-link router-link-active">Webpack4配置实战</a></li><li class="dropdown-item"><!----> <a href="/frontend/typescript/" class="nav-link">每天学点typescript</a></li><li class="dropdown-item"><!----> <a href="/frontend/web/" class="nav-link">浏览器相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">服务端积累</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/docker/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/backend/nodejs/" class="nav-link">NodeJS</a></li><li class="dropdown-item"><!----> <a href="/backend/koa/" class="nav-link">Koa</a></li><li class="dropdown-item"><!----> <a href="/backend/mysql/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/backend/mongodb/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/backend/nginx/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/backend/http/" class="nav-link">HTTP协议</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">前端杂谈</a></div><div class="nav-item"><a href="/interview/" class="nav-link">每日一题</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/more/linux/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div> <a href="https://github.com/liujie2019/VuePress-Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Webpack4实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/webpack4/" class="sidebar-link">首页</a></li><li><a href="/frontend/webpack4/0.零配置打包.html" class="sidebar-link">0. 零配置打包</a></li><li><a href="/frontend/webpack4/01.Babel编译ES6.html" class="sidebar-link">1. Babel编译ES6+和JSX</a></li><li><a href="/frontend/webpack4/02.样式打包处理.html" class="sidebar-link">2. 样式打包处理</a></li><li><a href="/frontend/webpack4/03.自动生成HTML文件.html" class="sidebar-link">3. 自动生成HTML文件</a></li><li><a href="/frontend/webpack4/04.webpack-dev-server.html" class="active sidebar-link">4. webpack-dev-server</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver配置项详解" class="sidebar-link">DevServer配置项详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-hot" class="sidebar-link">devServer.hot</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-inline" class="sidebar-link">devServer.inline</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-historyapifallback" class="sidebar-link">devServer.historyApiFallback</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-contentbase" class="sidebar-link">devServer.contentBase</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-headers" class="sidebar-link">devServer.headers</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-host" class="sidebar-link">devServer.host</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-port" class="sidebar-link">devServer.port</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-allowedhosts" class="sidebar-link">devServer.allowedHosts</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-disablehostcheck" class="sidebar-link">devServer.disableHostCheck</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-https" class="sidebar-link">devServer.https</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-clientloglevel" class="sidebar-link">devServer.clientLogLevel</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-compress" class="sidebar-link">devServer.compress</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-open" class="sidebar-link">devServer.open</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-openpage" class="sidebar-link">devServer.openPage</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-overlay" class="sidebar-link">devServer.overlay</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-before" class="sidebar-link">devServer.before</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-index" class="sidebar-link">devServer.index</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-proxy" class="sidebar-link">devServer.proxy</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#devserver-publicpath" class="sidebar-link">devServer.publicPath</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#配置实战" class="sidebar-link">配置实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#content-base" class="sidebar-link">content-base</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#配置了output的publicpath" class="sidebar-link">配置了output的publicPath</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#自动刷新浏览器" class="sidebar-link">自动刷新浏览器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#iframe-mode" class="sidebar-link">iframe mode</a></li><li class="sidebar-sub-header"><a href="/frontend/webpack4/04.webpack-dev-server.html#inline-mode" class="sidebar-link">inline mode</a></li></ul></li></ul></li><li><a href="/frontend/webpack4/05.全局变量引入.html" class="sidebar-link">5. 全局变量引入</a></li><li><a href="/frontend/webpack4/06.图片打包处理.html" class="sidebar-link">6. 图片打包处理</a></li><li><a href="/frontend/webpack4/07.加载字体文件.html" class="sidebar-link">7. 打包字体文件</a></li><li><a href="/frontend/webpack4/08.配置source-map.html" class="sidebar-link">8. 配置sourceMap</a></li><li><a href="/frontend/webpack4/09.watch用法.html" class="sidebar-link">9. watch用法</a></li><li><a href="/frontend/webpack4/10.resolve属性的配置.html" class="sidebar-link">10. resolve属性的配置</a></li><li><a href="/frontend/webpack4/11.webpack小插件应用.html" class="sidebar-link">11. Webpack小插件应用</a></li><li><a href="/frontend/webpack4/12.webpack跨域问题.html" class="sidebar-link">12. webpack跨域问题</a></li><li><a href="/frontend/webpack4/13.定义环境变量.html" class="sidebar-link">13. 定义环境变量</a></li><li><a href="/frontend/webpack4/14.区分不同环境.html" class="sidebar-link">14. 区分不同环境</a></li><li><a href="/frontend/webpack4/15.使用DllPlugin.html" class="sidebar-link">15. 使用DllPlugin(动态链接库)</a></li><li><a href="/frontend/webpack4/16.Code Splitting.html" class="sidebar-link">16. Code Splitting(代码分割)</a></li><li><a href="/frontend/webpack4/17.懒加载.html" class="sidebar-link">17. 懒加载</a></li><li><a href="/frontend/webpack4/18.JS Tree Shaking.html" class="sidebar-link">18. JS Tree Shaking</a></li><li><a href="/frontend/webpack4/19.CSS Tree Shaking.html" class="sidebar-link">19. CSS Tree Shaking</a></li><li><a href="/frontend/webpack4/20.使用HappyPack.html" class="sidebar-link">20. 使用HappyPack</a></li><li><a href="/frontend/webpack4/21.自定义全局常量.html" class="sidebar-link">21. 自定义全局常量和环境变量</a></li><li><a href="/frontend/webpack4/22.打包自定义第三方库.html" class="sidebar-link">22. 打包自定义的第三方库</a></li><li><a href="/frontend/webpack4/23.打包分析(Preloading和Prefetching).html" class="sidebar-link">23. 打包分析(Preloading和Prefetching)</a></li><li><a href="/frontend/webpack4/24.Shimming.html" class="sidebar-link">24. Shimming(加垫片)</a></li><li><a href="/frontend/webpack4/25.ts打包.html" class="sidebar-link">25. ts打包</a></li><li><a href="/frontend/webpack4/26.资源内联.html" class="sidebar-link">26. 资源内联</a></li><li><a href="/frontend/webpack4/27.ScopeHoisting使用和原理分析.html" class="sidebar-link">27. Scope Hoisting使用和原理分析</a></li><li><a href="/frontend/webpack4/28.webpack与eslint结合.html" class="sidebar-link">28. webpack与eslint结合</a></li><li><a href="/frontend/webpack4/29.webpack打包组件和基础库.html" class="sidebar-link">29. webpack打包组件和基础库</a></li><li><a href="/frontend/webpack4/30.webpack实现SSR打包.html" class="sidebar-link">30. webpack实现SSR打包</a></li><li><a href="/frontend/webpack4/31.webpack构建优化.html" class="sidebar-link">31. webpack构建优化</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>为什么要基于webpack-dev-server起一个服务来打开打包后的文件？因为file协议打开的文件，不支持发送ajax请求；而通过起一个服务，可以通过http协议打开对应的html文件，可以更好的支持ajax请求的发送。</p> <h2 id="devserver配置项详解"><a href="#devserver配置项详解" aria-hidden="true" class="header-anchor">#</a> DevServer配置项详解</h2> <p>要配置<code>DevServer</code>，除了可以在配置文件里通过devServer传入参数，还可以通过命令行参数传入。<strong>需要注意的是：</strong> 只有在通过<code>DevServer</code>启动Webpack时，配置文件里的<code>devServer</code>才会生效，因为这些参数所对应的功能都是<code>DevServer</code>提供的，Webpack本身并不认识<code>devServer</code>配置项。</p> <h3 id="devserver-hot"><a href="#devserver-hot" aria-hidden="true" class="header-anchor">#</a> devServer.hot</h3> <p>hot属性配置模块热替换功能。DevServer的默认行为是：在发现源代码被更新后通过自动刷新整个页面来做到实时预览，开启模块热替换功能后，将在不刷新整个页面的情况下通过用新模块替换老模块来做到实时预览。</p> <h3 id="devserver-inline"><a href="#devserver-inline" aria-hidden="true" class="header-anchor">#</a> devServer.inline</h3> <p>DevServer的实时预览功能依赖一个注入页面里的代理客户端去接收来自DevServer的命令并负责刷新网页的工作。inline属性用于配置是否将这个代理客户端自动注入将运行在页面中的Chunk里，默认自动注入。DevServer会根据我们是否开启inline来调整它的自动刷新策略。</p> <ol><li>开启inline：DevServer会在构建变化后的代码时通过代理客户端控制网页刷新；</li> <li>关闭inline：DevServer将无法直接控制要开发的网页。这时它会通过iframe的方式去运行要开发的网页。在构建完变化后的代码时，会通过刷新iframe来实现实时预览，但这时我们需要通过<code>http://localhost:8080/webpack-dev-server/</code>实时预览自己的网页。</li></ol> <h3 id="devserver-historyapifallback"><a href="#devserver-historyapifallback" aria-hidden="true" class="header-anchor">#</a> devServer.historyApiFallback</h3> <p>historyApiFallback属性用于方便地开发使用了HTML5 History API的单页应用。这类单页应用要求服务器在针对任何命中的路由时，都返回一个对应的HTML文件。例如：在访问<code>http://localhost/user</code>和<code>http://localhost/home</code>时都返回<code>index.html</code>文件，浏览器端的javascript代码会从url里解析出当前页面的状态，显示对应的界面。</p> <blockquote><p>配置historyApiFallback最简单的做法是：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>上述配置会导致任何请求都会返回<code>index.html</code>文件，这只能用于只有一个HTML文件的应用。如果应用由多个单页应用组成，则需要<code>DevServer</code>根据不同的请求返回不同的HTML文件，配置如下：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>historyApiFallback<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用正则匹配命中路由</span>
    rewrites<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// /user开头的都返回user.html</span>
        <span class="token punctuation">{</span><span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/^\/user/</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/user.html'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// /game开头的都返回user.html</span>
        <span class="token punctuation">{</span><span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/^\/game/</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/game.html'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 其他的都返回index.html</span>
        <span class="token punctuation">{</span><span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/./</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/index.html'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="devserver-contentbase"><a href="#devserver-contentbase" aria-hidden="true" class="header-anchor">#</a> devServer.contentBase</h3> <p>contentBase属性配置DevServer服务器的文件根目录。在默认情况下为项目根目录，所以在一般情况下不需要设置它，除非有额外的文件需要被DevServer服务。例如：想将项目根目录下的public目录设置成DevServer服务器的文件根目录，则可以这样配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>也可以从多个目录提供内容：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token punctuation">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'assets'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>需要注意的是：DevServer服务器通过HTTP服务暴露文件的方式分为两类：</p></blockquote> <ol><li>暴露本地文件；</li> <li>暴露Webpack构建出的结果，由于构建出的结果交给了DevServer，所以我们在使用DevServer时，会在本地找不到构建出的文件。</li></ol> <blockquote><p>contentBase只能用来配置暴露本地文件的规则，可以通过<code>contentBase: false</code>来关闭暴露本地文件。</p></blockquote> <h3 id="devserver-headers"><a href="#devserver-headers" aria-hidden="true" class="header-anchor">#</a> devServer.headers</h3> <p>headers配置项可以在HTTP响应中注入一些HTTP响应头，使用如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'X-Custom-Foo'</span><span class="token punctuation">:</span> <span class="token string">'bar'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="devserver-host"><a href="#devserver-host" aria-hidden="true" class="header-anchor">#</a> devServer.host</h3> <p>host配置项用于配置DevServer服务监听的地址。默认情况下是localhost，如果<strong>想让局域网中的其他设备访问自己的本地服务</strong>，可以这样配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    host<span class="token punctuation">:</span> <span class="token string">'0.0.0.0'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>命令行使用方式：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">--</span>host <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="devserver-port"><a href="#devserver-port" aria-hidden="true" class="header-anchor">#</a> devServer.port</h3> <p>port配置项用于配置DevServer服务监听的端口，默认使用8080端口。</p> <h3 id="devserver-allowedhosts"><a href="#devserver-allowedhosts" aria-hidden="true" class="header-anchor">#</a> devServer.allowedHosts</h3> <p>allowedHosts配置项用于配置一个白名单列表，只有HTTP请求的host在列表里才正常返回，配置如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    allowedHosts<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 匹配单个域名</span>
      <span class="token string">'host.com'</span><span class="token punctuation">,</span>
      <span class="token string">'subdomain.host.com'</span><span class="token punctuation">,</span>
      <span class="token string">'subdomain2.host.com'</span><span class="token punctuation">,</span>
      <span class="token string">'host2.com'</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>模仿django的ALLOWED_HOSTS，以<code>.</code>开头的值可以用作子域通配符。<code>.host.com</code>将会匹配host.com, www.host.com 和host.com的任何其他子域名。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 和上述配置等价</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    allowedHosts<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'.host.com'</span><span class="token punctuation">,</span>
      <span class="token string">'host2.com'</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="devserver-disablehostcheck"><a href="#devserver-disablehostcheck" aria-hidden="true" class="header-anchor">#</a> devServer.disableHostCheck</h3> <p><code>devServer.disableHostCheck</code>配置项用于配置是否关闭用于DNS重新绑定的HTTP请求的host检查。DevServer默认只接收来自本地的请求，关闭后可以接收来自任意HOST的请求。通常用于搭配<code>--host 0.0.0.0</code>使用，因为想让其他设备访问自己的本地服务，但访问时是直接通过ip地址访问而不是通过host访问，所以需要关闭host检查。</p> <blockquote><p>配置局域网内访问：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>host<span class="token punctuation">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
disableHostCheck<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">// 关闭host检查</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="devserver-https"><a href="#devserver-https" aria-hidden="true" class="header-anchor">#</a> devServer.https</h3> <p>DevServer默认使用HTTP服务，也可以使用HTTPS服务。配置如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    https<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>DevServer会自动为我们生成一份HTTPS证书，如果想使用自己的证书，可以这样配置：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    https<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      key<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/server.key'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      cert<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/server.crt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      ca<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/ca.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="devserver-clientloglevel"><a href="#devserver-clientloglevel" aria-hidden="true" class="header-anchor">#</a> devServer.clientLogLevel</h3> <p>clientLogLevel属性配置客户端的日志等级，这会影响我们在浏览器开发者工具控制台里看到的日志内容。clientLogLevel是枚举类型，可取如下值之一：none、error、warning、info。默认为info级别，即输出所有类型的日志，设置为none时可以不输出任何日志。</p> <h3 id="devserver-compress"><a href="#devserver-compress" aria-hidden="true" class="header-anchor">#</a> devServer.compress</h3> <p>compress属性配置是否启用Gzip压缩，默认为false。</p> <h3 id="devserver-open"><a href="#devserver-open" aria-hidden="true" class="header-anchor">#</a> devServer.open</h3> <p>open属性用于在DevServer启动且第一次构建完成时，自动用我们系统的默认浏览器去打开要开发的网页。还可以使用devServer.openPage配置项来打开指定URL的网页。</p> <h3 id="devserver-openpage"><a href="#devserver-openpage" aria-hidden="true" class="header-anchor">#</a> devServer.openPage</h3> <p>指定打开浏览器时的导航页面。</p> <h3 id="devserver-overlay"><a href="#devserver-overlay" aria-hidden="true" class="header-anchor">#</a> devServer.overlay</h3> <p>overlay属性配置当出现编译器错误或警告时，在浏览器中显示全屏覆盖层，默认禁用。如果只想显示编译器错误：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    overlay<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// errors: true // 显示警告信息</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="devserver-before"><a href="#devserver-before" aria-hidden="true" class="header-anchor">#</a> devServer.before</h3> <p>在服务内部的所有其他中间件之前，提供执行自定义中间件的功能，这可以用来配置自定义处理程序。</p> <h3 id="devserver-index"><a href="#devserver-index" aria-hidden="true" class="header-anchor">#</a> devServer.index</h3> <p>指定被作为索引文件的文件名，devServer.index的值需要与HtmlWebpackPlugin中的filename保持一致。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  index<span class="token punctuation">:</span> <span class="token string">'test.html'</span><span class="token punctuation">,</span>
  port<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
  progress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 显示打包进度条</span>
  contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span> <span class="token comment">// 指定服务地址</span>
  open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 自动打开浏览器</span>
  compress<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// 压缩</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     filename<span class="token punctuation">:</span> <span class="token string">'test.html'</span><span class="token punctuation">,</span>
     template<span class="token punctuation">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
     title<span class="token punctuation">:</span> <span class="token string">'自动生成html'</span><span class="token punctuation">,</span>
     inject<span class="token punctuation">:</span> <span class="token string">'head'</span><span class="token punctuation">,</span>
     minify<span class="token punctuation">:</span> <span class="token punctuation">{</span>
       removeAttributeQuotes<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 移除属性的双引号</span>
       collapseWhitespace<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// 折叠空行变成一行</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     hash<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// 给插入到模板中的静态资源文件后面加一个hash值</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="devserver-proxy"><a href="#devserver-proxy" aria-hidden="true" class="header-anchor">#</a> devServer.proxy</h3> <p>proxy一般用于反向代理来解决跨域问题。假设前端服务运行在http://localhost:8080，访问http://localhost:8080/api/users将会被代理到http://localhost:8080/users(这里启用了路径重写，/api会被干掉)。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com/'</span><span class="token punctuation">,</span>
        pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'^/api'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// target是域名的话，需要这个参数，</span>
        secure<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 设置支持https协议的代理,</span>
        headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
           <span class="token string">'Host'</span><span class="token punctuation">:</span> <span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span>
           <span class="token string">'Origin'</span><span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com'</span><span class="token punctuation">,</span>
           <span class="token string">'Referer'</span><span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com'</span>
       <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">'/v1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>/api：请求路径匹配，如果请求以/api开头就开始匹配代理，比如api请求/api/users，会被代理到请求http://www.baidu.com/users；</li> <li>target：代理服务器地址，就是需要跨域的服务器地址。地址可以是域名，如：http://www.baidu.com；也可以是ip地址：http://localhost:3000。如果是域名需要额外添加一个参数changeOrigin: true，否则会代理失败；</li> <li>pathRewrite：路径重写，也就是说会修改最终请求的url路径。比如访问的api路径：/api/users，设置pathRewrite: {'^/api' : ''},后，最终代理访问的路径：http://www.baidu.com/users；</li> <li>changeOrigin：这个参数可以让target参数可以是域名；</li> <li>secure：secure: false，表示不检查安全问题。设置后，可以接受运行在HTTPS上，可以使用无效证书的后端服务器。</li> <li>headers: 有些后端对请求中的Origin做了校验，需要重写请求headers中的Origin等字段。</li></ul> <p>webpack-dev-server使用的是<a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="noopener noreferrer">http-proxy-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来实现跨域代理的。</p> <h3 id="devserver-publicpath"><a href="#devserver-publicpath" aria-hidden="true" class="header-anchor">#</a> devServer.publicPath</h3> <p>指定相关路径下的打包文件可在浏览器中访问。假设服务器运行在http://localhost:3000，并且output.filename被设置为bundle.js。默认devServer.publicPath是 '/'，所以bundle.js可以通过<code>http://localhost:3000/bundle.js</code>访问。
修改devServer.publicPath，将bundle放在指定目录下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     index<span class="token punctuation">:</span> <span class="token string">'test.html'</span><span class="token punctuation">,</span>
     port<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
     progress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 显示打包进度条</span>
     contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span> <span class="token comment">// 指定服务地址</span>
     open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 自动打开浏览器</span>
     compress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 压缩,</span>
     publicPath<span class="token punctuation">:</span> <span class="token string">'/assets/'</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>现在可以通过<code>http://localhost:3000/assets/bundle.js</code>访问bundle.js。</p> <img src="/webpack4/devserver.png" alt=""> <h2 id="配置实战"><a href="#配置实战" aria-hidden="true" class="header-anchor">#</a> 配置实战</h2> <h3 id="watch"><a href="#watch" aria-hidden="true" class="header-anchor">#</a> watch</h3> <p>webpack提供了<code>webpack --watch</code>的命令来动态监听文件的改变并实时打包，输出新的bundle.js文件，这样文件多了之后打包速度会很慢，此外这样的打包的方式不能做到HMR(Hot Module Replacement)，就是每次webpack编译完成之后，我们还需要手动刷新浏览器。
<code>webpack --watch</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
        <span class="token comment">// publicPath: '/assets/'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 只有在开启监听模式时，watchOptions才有意义</span>
    <span class="token comment">// 默认为false，也就是不开启</span>
    watch<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 监听模式运行时的参数</span>
    <span class="token comment">// 在开启监听模式时才有意义</span>
    watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不监听的文件或文件夹，支持正则匹配</span>
        <span class="token comment">// 默认为空</span>
        ignored<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        <span class="token comment">// 监听到变化发生后等300ms再去执行动作，截流</span>
        <span class="token comment">// 防止文件更新太快而导致重新编译频率太快。默认为300ms</span>
        aggregateTimeout<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
        <span class="token comment">// 判断文件是否发生变化是通过不停地询问系统指定文件有没有变化实现的</span>
        <span class="token comment">// 默认每秒询问1000次</span>
        poll<span class="token punctuation">:</span> <span class="token number">1000</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>webpack-dev-server提供的功能就能解决上面<code>watch</code>的2个问题。webpack-dev-server通过启动一个基于express的HTTP服务器。它的作用主要是用来伺服资源文件。
此外，这个HTTP服务器和client使用了websocket通讯协议，原始文件作出改动后，webpack-dev-server会实时的编译，需要注意的是：<strong>实时编译后的文件都保存到了内存当中，也就是说最后编译的文件并没有输出到目标文件夹</strong>。</p> <h3 id="content-base"><a href="#content-base" aria-hidden="true" class="header-anchor">#</a> content-base</h3> <p>设定webpack-dev-server伺服的目录。如果不进行设定的话，默认是在当前目录下。</p> <blockquote><p>需要注意：入口文件index.html所在目录必须要与webpack-dev-server伺服的目录保持一致，否则访问不成功。当前文件目录结构如下：</p></blockquote> <img src="/webpack4/devserver1.png" alt=""> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
        <span class="token comment">// publicPath: '/assets/'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// contentBase: path.join(__dirname, 'dist'),</span>
        compress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        port<span class="token punctuation">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
        host<span class="token punctuation">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
        disableHostCheck<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        overlay<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        noInfo<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>此时没有设置contentBase，webpack-dev-server伺服的目录为当前项目的根目录，与入口文件index.html所在目录一致，因此可以正常访问。</p> <p>假如将入口文件index.html放到dist目录下，就需要配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>contentBase<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="配置了output的publicpath"><a href="#配置了output的publicpath" aria-hidden="true" class="header-anchor">#</a> 配置了output的publicPath</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
     publicPath<span class="token punctuation">:</span> <span class="token string">'/assets/'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>配置了output的publicPath为<code>'/assets/'</code>，而index.html文件中bundle.js的引用路径没有改变，则会报文件找不到(404)。</p></blockquote> <img src="/webpack4/devserver2.png" alt=""> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/assets/bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><img src="/webpack4/devserver3.png" alt=""> <p>所以，如果配置了output的publicPath字段的值，在index.html文件里面也应该做出调整。因为webpack-dev-server伺服的文件是<strong>相对于publicPath这个路径的</strong>。</p> <h2 id="自动刷新浏览器"><a href="#自动刷新浏览器" aria-hidden="true" class="header-anchor">#</a> 自动刷新浏览器</h2> <p>监听到文件更新后的下一步是刷新浏览器，Webpack模块负责监听文件变化，webpack-dev-server模块负责刷新浏览器。在使用webpack-dev-serve模块去启动webpack模块时，webpack模块的监听模式默认会被开启。webpack模块会在文件发生变化时通知<code>webpack-dev-server</code>模块。
webpack-dev-server支持2种自动刷新的方式：</p> <ul><li>iframe mode</li> <li>inline mode(默认方式)</li></ul> <p>这2种模式配置的方式和访问的路径稍微有点区别，最主要的区别还是<code>iframe mode</code>是在网页中嵌入了一个iframe，将我们自己的应用注入到这个iframe当中去，因此每次你修改的文件后，都是这个iframe进行了reload。</p> <p>默认情况下，应用程序启用内联模式(inline mode)。这意味着一段处理实时重载的脚本被插入到你的包(bundle)中，并且构建消息将会出现在浏览器控制台。</p> <h3 id="iframe-mode"><a href="#iframe-mode" aria-hidden="true" class="header-anchor">#</a> iframe mode</h3> <p>当然也可以使用iframe模式，它在通知栏下面使用<code>&lt;iframe&gt;</code>标签，包含了关于构建的消息。切换到iframe 模式：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    inline<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>Usage via the CLI</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">--</span>inline<span class="token operator">=</span><span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Iframe mode</code>下，浏览器访问的路径是:
<code>localhost:8080/webpack-dev-server/index.html</code>。
这个时候这个页面的header部分会出现整个reload消息的状态。当时改变源文件的时候，即可以完成自动编译打包，页面自动刷新的功能。</p> <img src="/webpack4/devserver5.png" alt=""> <img src="/webpack4/devserver4.png" alt=""> <p>在Iframe mode下，请求<code>/webpack-dev-server/index.html</code>路径时，会返回<code>client/live.html</code>文件，这个文件的内容如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0&quot;/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个页面会请求client目录下的live.bundle.js，其中里面会新建一个iframe，我们的应用就被注入到了这个iframe当中。同时live.bundle.js中含有<code>socket.io</code>的client代码，这样它就能和webpack-dev-server建立的http server进行websocket通讯了。并根据返回的信息完成相应的动作。</p> <h3 id="inline-mode"><a href="#inline-mode" aria-hidden="true" class="header-anchor">#</a> inline mode</h3> <blockquote><p>Usage via the CLI：</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>webpack-dev-server --inline
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>这个时候访问的路径是:</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>localhost<span class="token punctuation">:</span><span class="token number">8080</span><span class="token operator">/</span>index<span class="token punctuation">.</span>html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也能完成自动编译打包，页面自动刷新的功能。但是没有的header部分的reload消息的显示，不过在控制台中会显示reload的状态。</p> <img src="/webpack4/devserver6.png" alt="">
## 在Node中使用webpack
可以基于webpack-dev-middleware和express实现一个类似于webpack-dev-server的服务器。下面的实现比较简单，还需要手动刷新页面才能看到效果。
```bash
yarn add webpack-dev-middleware express -D
```
```js
const express = require('express');
const webpack = require('webpack');
const webpackDevMiddleware = require('webpack-dev-middleware');
const config = require('./webpack.config');
const complier = webpack(config);
const app = express();
<p>app.use(webpackDevMiddleware(complier, {
publicPath: config.output.publicPath
}));</p> <p>app.listen(8088, () =&gt; {
console.log('server is run 8088');
});</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>## 参考文档
1. [webpack-dev-server使用方法，看完还不会的来找我~](https://segmentfault.com/a/1190000006670084#articleHeader4)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/liujie2019/VuePress-Blog/edit/master/docs/frontend/webpack4/04.webpack-dev-server.md" target="_blank" rel="noopener noreferrer">查看原文 | 在GitHub上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2019-11-30 14:12:09</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/webpack4/03.自动生成HTML文件.html" class="prev">3. 自动生成HTML文件</a></span> <span class="next"><a href="/frontend/webpack4/05.全局变量引入.html">5. 全局变量引入</a>→
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.c2739f0d.js" defer></script><script src="/assets/js/2.fd8d7b4d.js" defer></script><script src="/assets/js/214.b8d20041.js" defer></script><script src="/assets/js/29.03c53af3.js" defer></script>
  </body>
</html>
